<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: structures/MenuMessage.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: structures/MenuMessage.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Menu = require('./menu')
const Discord = require('discord.js')

/**
 * A [Message]{@link Discord#Message} that has a [Menu]{@link Menu}.
 */
class MenuMessage {
  /**
   * Creates a new MenuMessage.
   *
   * @param  {(string|RichEmbed)} content The content of the message.
   * @param  {Channel} channel The channel to send the message to, or the channel the message is in.
   * @param  {boolean} [embed=false] Whether or not content is a RichEmbed.
   */

  constructor (content, channel, embed = false) {
    /**
     * The Channel the MenuMessage exists in.
     * @name MenuMessage#Channel
     * @type {Channel}
     * @readonly
     */
    Object.defineProperty(this, 'Channel', {value: channel})
    /**
     * The content of the message.
     * @name MenuMessage#Content
     * @type {string|RichEmbed}
     * @readonly
     */
    Object.defineProperty(this, 'Content', {value: content})
    /**
     * Whether or not the message should be treated as a RichEmbed.
     * @name MenuMessage#Embed
     * @type {boolean}
     * @readonly
     */
    Object.defineProperty(this, 'Embed', {value: embed})
  }

  /**
   * Adds a Menu to this message.
   *
   * @param  {?Button[]} [buttons=null] An array of Buttons to add to the Menu.
   * @param  {Object} [data=undefined] Optional data to pass to the Button.
   */
  AddMenu (buttons = null, data = undefined) {
    // If this doesn't already have a Menu:
    if (!this.Menu) {
      // Create a new Menu.
      this.Menu = new Menu()
      // If there have been Buttons passed:
      if (buttons) {
        // Loop through each Button, adding it to the Menu.
        buttons.forEach(button => {
          this.Menu.AddButton(button.emoji, button.Callback, data)
        })
      }
    }
  }

  /**
   * Sends the MenuMessage, drawing the buttons and registering the menu.
   * @returns Promise&lt;[Message]{@link Message}>
   */
  Send () {
    // Asynchronously sends the message, like default Discord messages.
    var sending = new Promise((resolve, reject) => {
      // If this is an embed:
      if (this.Embed) {
        // Send the embed to the message's channel, then:
        this.Channel.send({embed: this.Content}).then(m => {
          // If this MenuMessage has a menu, display it and resolve this promise.
          if (this.Menu) this.Menu.Display(m)
          resolve(m)
        }).catch(console.error)
      }
      // Otherwise, send this message as a normal message, then:
      else {
        this.Channel.send(this.Content)
        .then(m => {
          // If this MenuMessage has a menu, display it and resolve this promise.
          if (this.Menu) this.Menu.Display(m)
          resolve(m)
        }).catch(console.error)
      }
    })

    // Return the promise.
    return sending
  }
}
module.exports = MenuMessage
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ButtonBuilder.html">ButtonBuilder</a></li><li><a href="MenuButton.html">MenuButton</a></li><li><a href="MenuManager.html">MenuManager</a></li><li><a href="MenuMessage.html">MenuMessage</a></li></ul><h3>Namespaces</h3><ul><li><a href="ReactionMenus.html">ReactionMenus</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Aug 19 2017 19:01:10 GMT+1200 (New Zealand Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
